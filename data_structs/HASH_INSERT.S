.global HASH_INSERT
.global HASH_DELETE
.global HASH_FIND
HASH_INSERT:
	MOV X5,#100
	MOV X6,#8
	MUL X8,X5,X6
	MOV X19,X0
	CBZ X1,HEAD_CASE
	MOV X10, X30
	BL HASH
	ADD X1,X1,X5
	LSL X3,X1,#3
	ADD X2,X13,X3
	STUR X0,[X2,#48]
	MOV X0,X13
	BR X10
HEAD_CASE:
	LSL X8,X8,#5
	SUB SP,SP,#1024
	MOV X29,SP
	MOV X13,SP
	MOV X3,#0//iterator
	MOV X6,#-1
	B initLOOP
initLOOP:
	CMP X3,X5
	B.EQ INSERT_ONE
	LSL X4,X3,#3 // convert address
	ADD X7,X13,X4
	STUR X6,[X7,#0]
	LDUR X9,[X7,#0]
	ADD X3,X3,#1
	B initLOOP
INSERT_ONE:
	MOV X20,X30
	BL HASH
	MOV X0,X13
	ADD X1,X1,X5
	LSL X3,X1,#3
	ADD X2,X13,X3
	STUR X19,[X2,#48]
	BR X20
HASH:
	MOV X1,X0
	B LOOP1
LOOP1:
	SUB X1,X1,X5
	CMP X1,XZR
	B.GE LOOP1
	BR X30

HASH_DELETE:
	MOV X20,X30
	MOV X13,SP
	MOV X5,#100

	MOV X3,#0//iterator
	MOV X6,#-1
	BL HASH
	MOV X0,X13

	ADD X1,X1,X5
	LSL X3,X1,#3
	ADD X2,X13,X3
	STUR X6,[X2,#48]
	BR X20

HASH_FIND:
	MOV X4,X30
	MOV X13,SP
	MOV X5,#100

	MOV X3,#0//iterator
	MOV X6,#-1
	BL HASH
	ADD X1,X1,X5
	LSL X3,X1,#3
	ADD X2,X13,X3
	LDUR X6,[X2,#48]
	CMP X6,X0
	B.EQ SUCCESS
	//MOV X6,#-1
	MUL X0,X13,X6
	MOV X0,#0
	BR X4
SUCCESS:
	MOV X0,#1
	BR X4
